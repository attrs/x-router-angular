/*! x-router-angular - attrs */!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define("xrouterangular",["angular"],n):"object"==typeof exports?exports.xrouterangular=n(require("angular")):e.xrouterangular=n(e.angular)}(this,function(e){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function r(e){return"object"==typeof Node&&e instanceof Node||!("number"!=typeof e.nodeType||!e.nodeName)}function o(e){return"object"==typeof Element&&e instanceof Element||!(1!==e.nodeType||!e.tagName||"function"!=typeof e.setAttribute)}function u(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)}function c(e,n){if(n=n||function(e){e&&console.error(e)},o(e)&&!(e=y.element(e).scope()))return n(new TypeError("not found scope"));var t=(e.$root||e).$$phase;"$apply"==t||"$digest"==t?e.$eval(function(){n(null,e)}):e.$apply(function(){n(null,e)})}function i(e,n,t){if(console.warn("[x-router-angular] pack is deprecated, use inject(scope, injector, elements) instead"),t=t||function(e){e&&console.error(e)},!n)return t(new TypeError("missing elements"));if(r(n)&&(n=[n]),!u(n))return t(new TypeError("unknwon type of elements: "+n));if("string"==typeof e&&(el=document.querySelector(e)),!e)return t(new Error("not found parent scope element"));if(!o(e))return t(new Error("parent must be an element"));e=y.element(e);var c=e.scope(),i=e.injector();return c?i?([].forEach.call(n,function(e){e.__packed__||(e.__packed__=!0,i.invoke(["$compile","$rootScope",function(n,t){console.log("compile",c,c.$root,t),n(e)(c),t.$digest()}]))}),void t(null,n)):t(new Error("not found parent scope injector")):t(new Error("not found parent scope"))}function s(e,n,t){[].forEach.call(t,function(t){t.__packed__||(t.__packed__=!0,n.invoke(["$compile","$rootScope",function(n,r){n(t)(e),r.$digest()}]))})}function a(e,n){return"string"==typeof e&&(e=document.querySelector(e)),e?o(e)?(n&&(e=e.querySelector('*[ng-controller="'+n+'"]')),e?y.element(e).scope():null):console.error("element must be an element or selector",arguments[0]):console.error("missing element",e)}function l(e){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.error("not found element",e);if(!o(e))return console.error("element must be an element or selector",arguments[0]);var n=e.querySelectorAll("*[ng-controller]"),t=[],r=t.elements=[];return[].forEach.call(n,function(e){var n=e.getAttribute("ng-controller"),o=y.element(e).scope();t.push(o),t[n]=o,r.push(e),r[n]=e}),t}function f(e){function n(){return e?y.element(e).scope()?e:(e=e.parentNode,void n()):null}return n()}function p(e){var n=f(e);return n&&y.element(n).scope()}function d(e){return{clear:function(){return[].slice.call(e.childNodes).forEach(function(n){e.removeChild(n)}),this},append:function(n){return n.forEach(function(n){if(3===n.nodeType){if(!n.nodeValue)return;n=document.createTextNode(n.nodeValue)}else if(1!==n.nodeType)return;e.appendChild(n)}),this},html:function(n){return e.innerHTML=n,this},contents:function(){return[].slice.call(e.childNodes)}}}function g(e){e=e||"app";var n=function(){return document.querySelector('[ng-app="'+e+'"]')},t=function(){return y.element(n()).scope()},r=function(){var t=n();return t||(t=document.createElement("div"),t.setAttribute("ng-app",e),t.style.display="none",y.bootstrap(t,[e]),document.body.appendChild(t)),t};return{root:n,apply:function(e,n){return"function"==typeof e?c(t(),e):c(e,n),this},bootstrap:r,inject:function(n,t){var o=r();if(!o)return console.error('[x-router-angular] module "'+e+'" is not boostrapped');if(!n)return console.error("[x-router-angular] illegal arguments, elements was null");"string"==typeof n&&(n=[document.querySelector(n)]),t&&"string"==typeof t&&(t=document.querySelector(t));var u=y.element(o).scope(),c=y.element(o).injector();return s(t?y.element(t).scope():u,c,n),this},scope:function(n,t){var o=r();return o?arguments.length?a(n,t):a(o):console.error('[x-router-angular] module "'+e+'" is not boostrapped')},scopes:function(e){return l(e)}}}function h(e){e=e||{};var n=g(e.app),t=[],r=function(){var e=[];t.forEach(function(n){document.body.contains(n)||e.push(n)}),e.forEach(function(e){var n=y.element(e).scope();n&&n&&!b.exists(n)&&(t.splice(t.indexOf(e),1),n.$destroy())})};return function(o,u){var c=o.src,i=o.html,s=o.target,a=o.parent||o.parentscope,p=o.controller,g=o.flat||e.flat,h=c||x(i),m=n.bootstrap(),T=o.response,w=o.cache||o.singleton,E=+o.expire||0,_=o.reset,S=(new Date).getTime();if("cache"in o||"singleton"in o||(w=e.cache||e.singleton),T&&(T.angular=T.angular||n),p&&"string"==typeof p){var j=document.createElement("div");j.setAttribute("ng-controller",p),s.innerHTML="",s.appendChild(j),s=j}"string"==typeof a&&(a=document.querySelector(a)),a||(a=g?m:f(s));var A=y.element(m).scope(),$=(y.element(m).injector(),y.element(a).scope());A===$&&($&&$.$root)===A||(a=m,$=A);var q=function(e){r(),n.inject(e,a),[].forEach.call(s.querySelectorAll("[ng-controller]"),function(e){t.push(e)});var o=l(s);w&&b.set(h,{els:e,scopes:o,time:S}),u(null,o)};if(!_&&w&&b.get(h)){var B=b.get(h);if(!E||S-B.time<E)return B.time=S,function(){var e=B.els;s.children.length===e.length&&s.children[0]===e[0]||d(s).clear().append(B.els),u(null,B.scopes)}()}if(b.remove(h),c)v(c,function(e,n){if(e)return u(e);q(d(s).html(n).contents())});else{if(!i)return u(new Error("src or html must be defined"));q(d(s).html(i).contents())}}}function m(e){return e=e||{},function(n,t,r){t.angular=t.angular||g(e.app),t.ensure=t.ensure||function(e,n){return console.warn("[x-router-angular] res.ensure is deprecated, use res.angular.apply instead"),t.angular.apply.apply(t.angular,arguments),this},t.pack=t.pack||function(e,n){return console.warn("[x-router-angular] res.pack is deprecated, use res.angular.inject(elements[, parent]) instead"),i(t.angular.root(),e,n),this},t.scope=t.scope||function(e,n){return console.warn("[x-router-angular] res.scope is deprecated, use res.angular.scope instead"),t.angular.scope.apply(t.angular,arguments)},t.scopes=t.scopes||function(e){return console.warn("[x-router-angular] res.scopes is deprecated, use res.angular.scopes instead"),t.angular.scopes.apply(t.angular,arguments)},r()}}var y=t(1),v=t(2),x=t(3),b=function(){var e={},n=[],t={get:function(n){return e[n]},set:function(t,r){return e[t]=r,(r.scopes||[]).forEach(function(e){~n.indexOf(e)||n.push(e)}),this},exists:function(e){return!!~n.indexOf(e)},remove:function(t){var r=e[t];return r&&((r.scopes||[]).forEach(function(e){e.$destroy(),~n.indexOf(e)||n.splice(n.indexOf(e),1)}),e[t]=null,delete e[t]),this},clear:function(){for(var r in e)t.remove(r);return e={},n=[],this}};return t}();h.middleware=m,h.ensure=c,h.safeApply=c,h.pack=i,h.scope=a,h.scopes=l,h.parentelement=f,h.parentscope=p,h.middleware=m,e.exports=h,y.module("xRouterAngular",[]).service("ensure",function(){return c}).service("inject",function(){return s}).run(["$rootScope",function(e){e.safeApply=function(n){c(e,n)}}])},function(n,t){n.exports=e},function(e,n){e.exports=function(e,n,t){if(!e)throw new Error("missing src");2==arguments.length&&"function"!=typeof n&&(t=n,n=null),"boolean"==typeof t&&(t={sync:t});var r,o,u=!0===(t&&t.sync),c=t&&t.method||"GET";scope=t&&t.scope||this;var i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(i.open(c,e,!u),t){for(var s in t.headers)i.setRequestHeader(s,t.headers);t.mimetype&&i.overrideMimeType(t.mimetype)}if(i.onreadystatechange=function(e){4==this.readyState&&(0==this.status||this.status>=200&&this.status<300?(r=this.responseText,n&&n.call(scope,null,r,i)):(o=new Error("["+this.status+"] "+this.responseText),n&&n.call(scope,o,null,i)))},t&&t.payload?i.send(JSON.stringify(t.payload)):i.send(),o)throw o;return r}},function(e,n,t){!function(){var n=t(4),r=t(5).utf8,o=t(6),u=t(5).bin,c=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?u.stringToBytes(e):r.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var i=n.bytesToWords(e),s=8*e.length,a=1732584193,l=-271733879,f=-1732584194,p=271733878,d=0;d<i.length;d++)i[d]=16711935&(i[d]<<8|i[d]>>>24)|4278255360&(i[d]<<24|i[d]>>>8);i[s>>>5]|=128<<s%32,i[14+(s+64>>>9<<4)]=s;for(var g=c._ff,h=c._gg,m=c._hh,y=c._ii,d=0;d<i.length;d+=16){var v=a,x=l,b=f,T=p;a=g(a,l,f,p,i[d+0],7,-680876936),p=g(p,a,l,f,i[d+1],12,-389564586),f=g(f,p,a,l,i[d+2],17,606105819),l=g(l,f,p,a,i[d+3],22,-1044525330),a=g(a,l,f,p,i[d+4],7,-176418897),p=g(p,a,l,f,i[d+5],12,1200080426),f=g(f,p,a,l,i[d+6],17,-1473231341),l=g(l,f,p,a,i[d+7],22,-45705983),a=g(a,l,f,p,i[d+8],7,1770035416),p=g(p,a,l,f,i[d+9],12,-1958414417),f=g(f,p,a,l,i[d+10],17,-42063),l=g(l,f,p,a,i[d+11],22,-1990404162),a=g(a,l,f,p,i[d+12],7,1804603682),p=g(p,a,l,f,i[d+13],12,-40341101),f=g(f,p,a,l,i[d+14],17,-1502002290),l=g(l,f,p,a,i[d+15],22,1236535329),a=h(a,l,f,p,i[d+1],5,-165796510),p=h(p,a,l,f,i[d+6],9,-1069501632),f=h(f,p,a,l,i[d+11],14,643717713),l=h(l,f,p,a,i[d+0],20,-373897302),a=h(a,l,f,p,i[d+5],5,-701558691),p=h(p,a,l,f,i[d+10],9,38016083),f=h(f,p,a,l,i[d+15],14,-660478335),l=h(l,f,p,a,i[d+4],20,-405537848),a=h(a,l,f,p,i[d+9],5,568446438),p=h(p,a,l,f,i[d+14],9,-1019803690),f=h(f,p,a,l,i[d+3],14,-187363961),l=h(l,f,p,a,i[d+8],20,1163531501),a=h(a,l,f,p,i[d+13],5,-1444681467),p=h(p,a,l,f,i[d+2],9,-51403784),f=h(f,p,a,l,i[d+7],14,1735328473),l=h(l,f,p,a,i[d+12],20,-1926607734),a=m(a,l,f,p,i[d+5],4,-378558),p=m(p,a,l,f,i[d+8],11,-2022574463),f=m(f,p,a,l,i[d+11],16,1839030562),l=m(l,f,p,a,i[d+14],23,-35309556),a=m(a,l,f,p,i[d+1],4,-1530992060),p=m(p,a,l,f,i[d+4],11,1272893353),f=m(f,p,a,l,i[d+7],16,-155497632),l=m(l,f,p,a,i[d+10],23,-1094730640),a=m(a,l,f,p,i[d+13],4,681279174),p=m(p,a,l,f,i[d+0],11,-358537222),f=m(f,p,a,l,i[d+3],16,-722521979),l=m(l,f,p,a,i[d+6],23,76029189),a=m(a,l,f,p,i[d+9],4,-640364487),p=m(p,a,l,f,i[d+12],11,-421815835),f=m(f,p,a,l,i[d+15],16,530742520),l=m(l,f,p,a,i[d+2],23,-995338651),a=y(a,l,f,p,i[d+0],6,-198630844),p=y(p,a,l,f,i[d+7],10,1126891415),f=y(f,p,a,l,i[d+14],15,-1416354905),l=y(l,f,p,a,i[d+5],21,-57434055),a=y(a,l,f,p,i[d+12],6,1700485571),p=y(p,a,l,f,i[d+3],10,-1894986606),f=y(f,p,a,l,i[d+10],15,-1051523),l=y(l,f,p,a,i[d+1],21,-2054922799),a=y(a,l,f,p,i[d+8],6,1873313359),p=y(p,a,l,f,i[d+15],10,-30611744),f=y(f,p,a,l,i[d+6],15,-1560198380),l=y(l,f,p,a,i[d+13],21,1309151649),a=y(a,l,f,p,i[d+4],6,-145523070),p=y(p,a,l,f,i[d+11],10,-1120210379),f=y(f,p,a,l,i[d+2],15,718787259),l=y(l,f,p,a,i[d+9],21,-343485551),a=a+v>>>0,l=l+x>>>0,f=f+b>>>0,p=p+T>>>0}return n.endian([a,l,f,p])};c._ff=function(e,n,t,r,o,u,c){var i=e+(n&t|~n&r)+(o>>>0)+c;return(i<<u|i>>>32-u)+n},c._gg=function(e,n,t,r,o,u,c){var i=e+(n&r|t&~r)+(o>>>0)+c;return(i<<u|i>>>32-u)+n},c._hh=function(e,n,t,r,o,u,c){var i=e+(n^t^r)+(o>>>0)+c;return(i<<u|i>>>32-u)+n},c._ii=function(e,n,t,r,o,u,c){var i=e+(t^(n|~r))+(o>>>0)+c;return(i<<u|i>>>32-u)+n},c._blocksize=16,c._digestsize=16,e.exports=function(e,t){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(c(e,t));return t&&t.asBytes?r:t&&t.asString?u.bytesToString(r):n.bytesToHex(r)}}()},function(e,n){!function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,n){return e<<n|e>>>32-n},rotr:function(e,n){return e<<32-n|e>>>n},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var n=0;n<e.length;n++)e[n]=t.endian(e[n]);return e},randomBytes:function(e){for(var n=[];e>0;e--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(e){for(var n=[],t=0,r=0;t<e.length;t++,r+=8)n[r>>>5]|=e[t]<<24-r%32;return n},wordsToBytes:function(e){for(var n=[],t=0;t<32*e.length;t+=8)n.push(e[t>>>5]>>>24-t%32&255);return n},bytesToHex:function(e){for(var n=[],t=0;t<e.length;t++)n.push((e[t]>>>4).toString(16)),n.push((15&e[t]).toString(16));return n.join("")},hexToBytes:function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(parseInt(e.substr(t,2),16));return n},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],u=0;u<4;u++)8*r+6*u<=8*e.length?t.push(n.charAt(o>>>6*(3-u)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(e.charAt(r))>>>6-2*o);return t}};e.exports=t}()},function(e,n){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],t=0;t<e.length;t++)n.push(255&e.charCodeAt(t));return n},bytesToString:function(e){for(var n=[],t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return n.join("")}}};e.exports=t},function(e,n){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}e.exports=function(e){return null!=e&&(t(e)||r(e)||!!e._isBuffer)}}])});