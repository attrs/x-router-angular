/*! x-router-angular - attrs */!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define("xrouterangular",["angular"],n):"object"==typeof exports?exports.xrouterangular=n(require("angular")):e.xrouterangular=n(e.angular)}(this,function(e){return function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){function t(e){return"object"==typeof Node&&e instanceof Node||!("number"!=typeof e.nodeType||!e.nodeName)}function o(e){return"object"==typeof Element&&e instanceof Element||!(1!==e.nodeType||!e.tagName||"function"!=typeof e.setAttribute)}function u(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)}function c(e,n){return n=n||function(e){e&&console.error(e)},o(e)&&(e=y.element(e).scope()),e?e.$root?e.$apply?void("$apply"==e.$$phase||"$digest"==e.$$phase||"$apply"==e.$root.$$phase||"$digest"==e.$root.$$phase?n(null,e):e.$apply(function(){n(null,e)})):n(new TypeError("invalid scope (scope.$apply not found)")):n(new TypeError("invalid scope (scope.$root not found)")):n(new TypeError("not found scope"))}function s(e,n,r){if(console.warn("[x-router-angular] pack is deprecated, use inject(scope, injector, elements) instead"),r=r||function(e){e&&console.error(e)},!n)return r(new TypeError("missing elements"));if(t(n)&&(n=[n]),!u(n))return r(new TypeError("unknwon type of elements: "+n));if("string"==typeof e&&(el=document.querySelector(e)),!e)return r(new Error("not found parent scope element"));if(!o(e))return r(new Error("parent must be an element"));e=y.element(e);var c=e.scope(),s=e.injector();return c?s?([].forEach.call(n,function(e){e.__packed__||(e.__packed__=!0,s.invoke(["$compile","$rootScope",function(n,r){console.log("compile",c,c.$root,r),n(e)(c),r.$digest()}]))}),void r(null,n)):r(new Error("not found parent scope injector")):r(new Error("not found parent scope"))}function i(e,n,r){[].forEach.call(r,function(r){r.__packed__||(r.__packed__=!0,n.invoke(["$compile","$rootScope",function(n,t){n(r)(e),t.$digest()}]))})}function a(e,n){return"string"==typeof e&&(e=document.querySelector(e)),e?o(e)?(n&&(e=e.querySelector('*[ng-controller="'+n+'"]')),e?y.element(e).scope():null):console.error("element must be an element or selector",arguments[0]):console.error("missing element",e)}function l(e){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.error("not found element",e);if(!o(e))return console.error("element must be an element or selector",arguments[0]);var n=e.querySelectorAll("*[ng-controller]"),r=[],t=r.elements=[];return[].forEach.call(n,function(e){var n=e.getAttribute("ng-controller"),o=y.element(e).scope();r.push(o),r[n]=o,t.push(e),t[n]=e}),r}function p(e){function n(){return e?y.element(e).scope()?e:(e=e.parentNode,void n()):null}return n()}function f(e){var n=p(e);return n&&y.element(n).scope()}function d(e){return{clear:function(){return[].slice.call(e.childNodes).forEach(function(n){e.removeChild(n)}),this},append:function(n){return n.forEach(function(n){if(3===n.nodeType){if(!n.nodeValue)return;n=document.createTextNode(n.nodeValue)}else if(1!==n.nodeType)return;e.appendChild(n)}),this},html:function(n){return e.innerHTML=n,this},contents:function(){return[].slice.call(e.childNodes)}}}function g(e){e=e||"app";var n=function(){return document.querySelector('[ng-app="'+e+'"]')},r=function(){return y.element(n()).scope()},t=function(){var r=n();return r||(r=document.createElement("div"),r.setAttribute("ng-app",e),r.style.display="none",y.bootstrap(r,[e]),document.body.appendChild(r)),r};return{root:n,apply:function(e,n){return"function"==typeof e?c(r(),e):c(e,n),this},bootstrap:t,inject:function(n,r){var o=t();if(!o)return console.error('[x-router-angular] module "'+e+'" is not boostrapped');if(!n)return console.error("[x-router-angular] illegal arguments, elements was null");"string"==typeof n&&(n=[document.querySelector(n)]),r&&"string"==typeof r&&(r=document.querySelector(r));var u=y.element(o).scope(),c=y.element(o).injector();return i(r?y.element(r).scope():u,c,n),this},scope:function(n,r){var o=t();return o?arguments.length?a(n,r):a(o):console.error('[x-router-angular] module "'+e+'" is not boostrapped')},scopes:function(e){return l(e)}}}function h(e){e=e||{};var n=g(e.app),r=[],t=function(){var e=[];r.forEach(function(n){document.body.contains(n)||e.push(n)}),e.forEach(function(e){var n=y.element(e).scope();n&&n&&!b.exists(n)&&(r.splice(r.indexOf(e),1),n.$destroy())})};return function(o,u){var c=o.src,s=o.html,i=o.target,a=o.parent||o.parentscope,f=o.controller,g=o.flat||e.flat,h=c||x(s),m=n.bootstrap(),T=o.response,w=o.cache||o.singleton,E=+o.expire||0,$=o.reset,_=(new Date).getTime();if("cache"in o||"singleton"in o||(w=e.cache||e.singleton),T&&(T.angular=T.angular||n),f&&"string"==typeof f){var S=document.createElement("div");S.setAttribute("ng-controller",f),i.innerHTML="",i.appendChild(S),i=S}"string"==typeof a&&(a=document.querySelector(a)),a||(a=g?m:p(i));var j=y.element(m).scope(),A=(y.element(m).injector(),y.element(a).scope());j===A&&(A&&A.$root)===j||(a=m,A=j);var q=function(e){t(),n.inject(e,a),[].forEach.call(i.querySelectorAll("[ng-controller]"),function(e){r.push(e)});var o=l(i);w&&b.set(h,{els:e,scopes:o,time:_}),u(null,o)};if(!$&&w&&b.get(h)){var B=b.get(h);if(!E||_-B.time<E)return B.time=_,function(){var e=B.els;i.children.length===e.length&&i.children[0]===e[0]||d(i).clear().append(B.els),u(null,B.scopes)}()}if(b.remove(h),c)v(c,function(e,n){if(e)return u(e);q(d(i).html(n).contents())});else{if(!s)return u(new Error("src or html must be defined"));q(d(i).html(s).contents())}}}function m(e){return e=e||{},function(n,r,t){r.angular=r.angular||g(e.app),r.ensure=r.ensure||function(e,n){return console.warn("[x-router-angular] res.ensure is deprecated, use res.angular.apply instead"),r.angular.apply.apply(r.angular,arguments),this},r.pack=r.pack||function(e,n){return console.warn("[x-router-angular] res.pack is deprecated, use res.angular.inject(elements[, parent]) instead"),s(r.angular.root(),e,n),this},r.scope=r.scope||function(e,n){return console.warn("[x-router-angular] res.scope is deprecated, use res.angular.scope instead"),r.angular.scope.apply(r.angular,arguments)},r.scopes=r.scopes||function(e){return console.warn("[x-router-angular] res.scopes is deprecated, use res.angular.scopes instead"),r.angular.scopes.apply(r.angular,arguments)},t()}}var y=r(1),v=r(2),x=r(3),b=function(){var e={},n=[],r={get:function(n){return e[n]},set:function(r,t){return e[r]=t,(t.scopes||[]).forEach(function(e){~n.indexOf(e)||n.push(e)}),this},exists:function(e){return!!~n.indexOf(e)},remove:function(r){var t=e[r];return t&&((t.scopes||[]).forEach(function(e){e.$destroy(),~n.indexOf(e)||n.splice(n.indexOf(e),1)}),e[r]=null,delete e[r]),this},clear:function(){for(var t in e)r.remove(t);return e={},n=[],this}};return r}();h.middleware=m,h.ensure=c,h.pack=s,h.scope=a,h.scopes=l,h.parentelement=p,h.parentscope=f,h.middleware=m,e.exports=h,y.module("xRouterAngular",[]).service("ensure",function(){return c}).service("inject",function(){return i})},function(n,r){n.exports=e},function(e,n){e.exports=function(e,n,r){if(!e)throw new Error("missing src");2==arguments.length&&"function"!=typeof n&&(r=n,n=null),"boolean"==typeof r&&(r={sync:r});var t,o,u=!0===(r&&r.sync),c=r&&r.method||"GET";scope=r&&r.scope||this;var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(s.open(c,e,!u),r){for(var i in r.headers)s.setRequestHeader(i,r.headers);r.mimetype&&s.overrideMimeType(r.mimetype)}if(s.onreadystatechange=function(e){4==this.readyState&&(0==this.status||this.status>=200&&this.status<300?(t=this.responseText,n&&n.call(scope,null,t,s)):(o=new Error("["+this.status+"] "+this.responseText),n&&n.call(scope,o,null,s)))},r&&r.payload?s.send(JSON.stringify(r.payload)):s.send(),o)throw o;return t}},function(e,n,r){!function(){var n=r(4),t=r(5).utf8,o=r(6),u=r(5).bin,c=function(e,r){e.constructor==String?e=r&&"binary"===r.encoding?u.stringToBytes(e):t.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=n.bytesToWords(e),i=8*e.length,a=1732584193,l=-271733879,p=-1732584194,f=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[i>>>5]|=128<<i%32,s[14+(i+64>>>9<<4)]=i;for(var g=c._ff,h=c._gg,m=c._hh,y=c._ii,d=0;d<s.length;d+=16){var v=a,x=l,b=p,T=f;a=g(a,l,p,f,s[d+0],7,-680876936),f=g(f,a,l,p,s[d+1],12,-389564586),p=g(p,f,a,l,s[d+2],17,606105819),l=g(l,p,f,a,s[d+3],22,-1044525330),a=g(a,l,p,f,s[d+4],7,-176418897),f=g(f,a,l,p,s[d+5],12,1200080426),p=g(p,f,a,l,s[d+6],17,-1473231341),l=g(l,p,f,a,s[d+7],22,-45705983),a=g(a,l,p,f,s[d+8],7,1770035416),f=g(f,a,l,p,s[d+9],12,-1958414417),p=g(p,f,a,l,s[d+10],17,-42063),l=g(l,p,f,a,s[d+11],22,-1990404162),a=g(a,l,p,f,s[d+12],7,1804603682),f=g(f,a,l,p,s[d+13],12,-40341101),p=g(p,f,a,l,s[d+14],17,-1502002290),l=g(l,p,f,a,s[d+15],22,1236535329),a=h(a,l,p,f,s[d+1],5,-165796510),f=h(f,a,l,p,s[d+6],9,-1069501632),p=h(p,f,a,l,s[d+11],14,643717713),l=h(l,p,f,a,s[d+0],20,-373897302),a=h(a,l,p,f,s[d+5],5,-701558691),f=h(f,a,l,p,s[d+10],9,38016083),p=h(p,f,a,l,s[d+15],14,-660478335),l=h(l,p,f,a,s[d+4],20,-405537848),a=h(a,l,p,f,s[d+9],5,568446438),f=h(f,a,l,p,s[d+14],9,-1019803690),p=h(p,f,a,l,s[d+3],14,-187363961),l=h(l,p,f,a,s[d+8],20,1163531501),a=h(a,l,p,f,s[d+13],5,-1444681467),f=h(f,a,l,p,s[d+2],9,-51403784),p=h(p,f,a,l,s[d+7],14,1735328473),l=h(l,p,f,a,s[d+12],20,-1926607734),a=m(a,l,p,f,s[d+5],4,-378558),f=m(f,a,l,p,s[d+8],11,-2022574463),p=m(p,f,a,l,s[d+11],16,1839030562),l=m(l,p,f,a,s[d+14],23,-35309556),a=m(a,l,p,f,s[d+1],4,-1530992060),f=m(f,a,l,p,s[d+4],11,1272893353),p=m(p,f,a,l,s[d+7],16,-155497632),l=m(l,p,f,a,s[d+10],23,-1094730640),a=m(a,l,p,f,s[d+13],4,681279174),f=m(f,a,l,p,s[d+0],11,-358537222),p=m(p,f,a,l,s[d+3],16,-722521979),l=m(l,p,f,a,s[d+6],23,76029189),a=m(a,l,p,f,s[d+9],4,-640364487),f=m(f,a,l,p,s[d+12],11,-421815835),p=m(p,f,a,l,s[d+15],16,530742520),l=m(l,p,f,a,s[d+2],23,-995338651),a=y(a,l,p,f,s[d+0],6,-198630844),f=y(f,a,l,p,s[d+7],10,1126891415),p=y(p,f,a,l,s[d+14],15,-1416354905),l=y(l,p,f,a,s[d+5],21,-57434055),a=y(a,l,p,f,s[d+12],6,1700485571),f=y(f,a,l,p,s[d+3],10,-1894986606),p=y(p,f,a,l,s[d+10],15,-1051523),l=y(l,p,f,a,s[d+1],21,-2054922799),a=y(a,l,p,f,s[d+8],6,1873313359),f=y(f,a,l,p,s[d+15],10,-30611744),p=y(p,f,a,l,s[d+6],15,-1560198380),l=y(l,p,f,a,s[d+13],21,1309151649),a=y(a,l,p,f,s[d+4],6,-145523070),f=y(f,a,l,p,s[d+11],10,-1120210379),p=y(p,f,a,l,s[d+2],15,718787259),l=y(l,p,f,a,s[d+9],21,-343485551),a=a+v>>>0,l=l+x>>>0,p=p+b>>>0,f=f+T>>>0}return n.endian([a,l,p,f])};c._ff=function(e,n,r,t,o,u,c){var s=e+(n&r|~n&t)+(o>>>0)+c;return(s<<u|s>>>32-u)+n},c._gg=function(e,n,r,t,o,u,c){var s=e+(n&t|r&~t)+(o>>>0)+c;return(s<<u|s>>>32-u)+n},c._hh=function(e,n,r,t,o,u,c){var s=e+(n^r^t)+(o>>>0)+c;return(s<<u|s>>>32-u)+n},c._ii=function(e,n,r,t,o,u,c){var s=e+(r^(n|~t))+(o>>>0)+c;return(s<<u|s>>>32-u)+n},c._blocksize=16,c._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var t=n.wordsToBytes(c(e,r));return r&&r.asBytes?t:r&&r.asString?u.bytesToString(t):n.bytesToHex(t)}}()},function(e,n){!function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,n){return e<<n|e>>>32-n},rotr:function(e,n){return e<<32-n|e>>>n},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var n=0;n<e.length;n++)e[n]=r.endian(e[n]);return e},randomBytes:function(e){for(var n=[];e>0;e--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(e){for(var n=[],r=0,t=0;r<e.length;r++,t+=8)n[t>>>5]|=e[r]<<24-t%32;return n},wordsToBytes:function(e){for(var n=[],r=0;r<32*e.length;r+=8)n.push(e[r>>>5]>>>24-r%32&255);return n},bytesToHex:function(e){for(var n=[],r=0;r<e.length;r++)n.push((e[r]>>>4).toString(16)),n.push((15&e[r]).toString(16));return n.join("")},hexToBytes:function(e){for(var n=[],r=0;r<e.length;r+=2)n.push(parseInt(e.substr(r,2),16));return n},bytesToBase64:function(e){for(var r=[],t=0;t<e.length;t+=3)for(var o=e[t]<<16|e[t+1]<<8|e[t+2],u=0;u<4;u++)8*t+6*u<=8*e.length?r.push(n.charAt(o>>>6*(3-u)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],t=0,o=0;t<e.length;o=++t%4)0!=o&&r.push((n.indexOf(e.charAt(t-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(e.charAt(t))>>>6-2*o);return r}};e.exports=r}()},function(e,n){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],r=0;r<e.length;r++)n.push(255&e.charCodeAt(r));return n},bytesToString:function(e){for(var n=[],r=0;r<e.length;r++)n.push(String.fromCharCode(e[r]));return n.join("")}}};e.exports=r},function(e,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function t(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}e.exports=function(e){return null!=e&&(r(e)||t(e)||!!e._isBuffer)}}])});