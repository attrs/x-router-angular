!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define("xrouterangular",["angular"],n):"object"==typeof exports?exports.xrouterangular=n(require("angular")):e.xrouterangular=n(e.angular)}(this,function(e){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function r(e){return"object"==typeof Node&&e instanceof Node||!("number"!=typeof e.nodeType||!e.nodeName)}function o(e){return"object"==typeof Element&&e instanceof Element||!(1!==e.nodeType||!e.tagName||"function"!=typeof e.setAttribute)}function u(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)}function c(e,n){return n=n||function(e){e&&console.error(e)},o(e)&&(e=y.element(e).scope()),e?e.$root?e.$apply?void("$apply"==e.$$phase||"$digest"==e.$$phase||"$apply"==e.$root.$$phase||"$digest"==e.$root.$$phase?n(null,e):e.$apply(function(){n(null,e)})):n(new TypeError("invalid scope (scope.$apply not found)")):n(new TypeError("invalid scope (scope.$root not found)")):n(new TypeError("not found scope"))}function i(e,n,t){if(t=t||function(e){e&&console.error(e)},!n)return t(new TypeError("missing elements"));if(r(n)&&(n=[n]),!u(n))return t(new TypeError("unknwon type of elements: "+n));if("string"==typeof e&&(el=document.querySelector(e)),!e)return t(new Error("not found parent scope element"));if(!o(e))return t(new Error("parent must be an element"));e=y.element(e);var c=e.scope(),i=e.injector();return c?i?([].forEach.call(n,function(e){e.__packed__||(e.__packed__=!0,i.invoke(["$compile","$rootScope",function(n,t){n(e)(c||t),t.$digest()}]))}),void t(null,n)):t(new Error("not found parent scope injector")):t(new Error("not found parent scope"))}function l(e,n){return"string"==typeof e&&(e=document.querySelector(e)),e?o(e)?(n&&(e=e.querySelector('*[ng-controller="'+n+'"]')),e?y.element(e).scope():null):console.error("element must be an element or selector",arguments[0]):console.error("missing element",e)}function s(e){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.error("not found element",e);if(!o(e))return console.error("element must be an element or selector",arguments[0]);var n=e.querySelectorAll("*[ng-controller]"),t=[],r=t.elements=[];return[].forEach.call(n,function(e){var n=e.getAttribute("ng-controller"),o=y.element(e).scope();t.push(o),t[n]=o,r.push(e),r[n]=e}),t}function p(e){function n(){if(!e)return null;var t=y.element(e).scope();return t?e:(e=e.parentNode,void n())}return n()}function a(e){var n=p(e);return n&&y.element(n).scope()}function f(e){return{clear:function(){return[].forEach.call(e.childNodes,function(n){e.removeChild(n)}),this},append:function(n){return n.forEach(function(n){if(3===n.nodeType){if(!n.nodeValue)return;n=document.createTextNode(n.nodeValue)}else if(1!==n.nodeType)return;e.appendChild(n)}),this},html:function(n){return e.innerHTML=n,this},contents:function(){var n=[];return[].forEach.call(e.childNodes,function(e){n.push(e)}),n}}}function d(e){e=e||{};var n=function(){return e.app?document.querySelector('[ng-app="'+e.app+'"]'):document.querySelector("[ng-app]")};return function(t,r){var o=t.src,u=t.html,c=t.target,l=t.parent,a=t.controller,d=t.flat||e.flat;if(a&&"string"==typeof a){var m=document.createElement("div");m.setAttribute("ng-controller",a),c.innerHTML="",c.appendChild(m),l=c=m}if("parent"in t||(l=e.parent,l||d||(l=p(c))),l||(l=n()),o){var y=t.singleton;if("singleton"in t||(y=e.singleton),y&&g[o])return function(){f(c).clear().append(g[o].els),r(null,g[o].scopes)}();g[o]=null,delete g[o],h(o,function(e,n){if(e)return r(e);var t=f(c).html(n).contents();i(l,t,function(e){if(e)return r(e);var n=s(c);y&&(g[o]={els:t,scopes:n}),r(null,n)})})}else{if(!u)return r(new Error("src or html must be defined"));var v=f(c).html(u).contents();setTimeout(function(){i(l,v,function(e){return e?r(e):void r(null,s(c))})},1)}}}function m(e){e=e||{};var n=e.app,t=function(){return n?document.querySelector('[ng-app="'+n+'"]'):document.querySelector("[ng-app]")};return function(e,n,r){n.ensure=function(e,n){return c(e,n),this},n.pack=function(e,n){return i(t(),e,n),this},n.scope=function(e,n){return arguments.length?l(e,n):l(t())},n.scopes=function(e){return s(e)},r()}}var y=t(1),h=t(2),g={};d.ensure=c,d.pack=i,d.scope=l,d.scopes=s,d.parentelement=p,d.parentscope=a,d.middleware=m,d.cache=g,d.clearCache=function(){g={}},e.exports=d,y.module("xRouterAngular",[]).service("xRouterAngular",function(){return{ensure:c,pack:i,scope:l,scopes:s,parentelement:p,parentscope:a,cache:g,clearCache:function(){g={}}}})},function(n,t){n.exports=e},function(e,n){e.exports=function(e,n,t){if(!e)throw new Error("missing src");2==arguments.length&&"function"!=typeof n&&(t=n,n=null),"boolean"==typeof t&&(t={sync:t});var r,o,u=(t&&t.sync)===!0,c=t&&t.method||"GET";scope=t&&t.scope||this;var i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(i.open(c,e,!u),t){for(var l in t.headers)i.setRequestHeader(l,t.headers);t.mimetype&&i.overrideMimeType(t.mimetype)}if(i.onreadystatechange=function(e){4==this.readyState&&(0==this.status||this.status>=200&&this.status<300?(r=this.responseText,n&&n.call(scope,null,r,i)):(o=new Error("["+this.status+"] "+this.responseText),n&&n.call(scope,o,null,i)))},t&&t.payload?i.send(JSON.stringify(t.payload)):i.send(),o)throw o;return r}}])});