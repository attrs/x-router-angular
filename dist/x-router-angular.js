!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define("xrouterangular",["angular"],n):"object"==typeof exports?exports.xrouterangular=n(require("angular")):e.xrouterangular=n(e.angular)}(this,function(e){return function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){function t(e){return"object"==typeof Node&&e instanceof Node||!("number"!=typeof e.nodeType||!e.nodeName)}function o(e){return"object"==typeof Element&&e instanceof Element||!(1!==e.nodeType||!e.tagName||"function"!=typeof e.setAttribute)}function u(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)}function c(e,n){return n=n||function(e){e&&console.error(e)},o(e)&&(e=m.element(e).scope()),e?e.$root?e.$apply?void("$digest"!=e.$root.$$phase&&"$apply"!=e.$root.$$phase?e.$apply(function(){n&&n(null,e)}):n&&n(null,e)):n(new TypeError("invalid scope (scope.$apply not found)")):n(new TypeError("invalid scope (scope.$root not found)")):n(new TypeError("not found scope"))}function l(e,n,r){if(r=r||function(e){e&&console.error(e)},!n)return r(new TypeError("missing elements"));if(t(n)&&(n=[n]),!u(n))return r(new TypeError("unknwon type of elements: "+n));if("string"==typeof e&&(el=document.querySelector(e)),!e)return r("not found parent scope element",e);if(!o(e))return r(new Error("parent must be an element"));e=m.element(e);var c=e.scope(),l=e.injector();return c?l?([].forEach.call(n,function(e){e.__packed__||(e.__packed__=!0,l.invoke(["$compile","$rootScope",function(n,r){n(e)(c||r),r.$digest()}]))}),void r(null,n)):r(new Error("not found parent scope injector")):r(new Error("not found parent scope"))}function i(e,n){return"string"==typeof e&&(e=document.querySelector(e)),e?o(e)?(n&&(e=e.querySelector('*[ng-controller="'+n+'"]')),e?m.element(e).scope():console.error("not found controller",n)):console.error("element must be an element or selector",arguments[0]):console.error("not found element",e)}function p(e){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.error("not found element",e);if(!o(e))return console.error("element must be an element or selector",arguments[0]);var n=e.querySelectorAll("*[ng-controller]"),r=[],t=r.elements=[];return[].forEach.call(n,function(e){var n=e.getAttribute("ng-controller"),o=m.element(e).scope();r.push(o),r[n]=o,t.push(e),t[n]=e}),r}function a(e){function n(){if(!e)return null;var r=m.element(e).scope();return r?e:(e=e.parentNode,void n())}return n()}function s(e){var n=a(e);return n&&m.element(n).scope()}function f(e){return e=e||{},function(n,r,t){var o=r.singleton,u=r.target,c=r.parent,i=r.controller;if(i&&"string"==typeof i){var s=document.createElement("div");s.setAttribute("ng-controller",i),u.innerHTML="",u.appendChild(s),l(c||a(u),s),c=u=s}return"singleton"in r||(o=e.singleton),"parent"in r||(c=e.parent),o&&y[n]?function(){u.innerHTML="",[].forEach.call(y[n].els,function(e){u.appendChild(e)}),t(null,y[n].scopes)}():void this.util.ajax(n,function(e,r){if(e)return t(e);var i=this.util.evalhtml(r);u.innerHTML="",[].forEach.call(i,function(e){u.appendChild(e)}),l(c||a(u),i,function(e){if(e)return t(e);var r=p(u);o&&(y[n]={els:i,scopes:r}),t(null,r)})})}}function d(e){e=e||{};var n=e.app,r=function(){return n?document.querySelector('[ng-app="'+n+'"]'):document.querySelector("[ng-app]")};return function(e,n,t){n.ensure=function(e,n){return c(e,n),this},n.pack=function(e,n){return l(r(),e,n),this},n.scope=function(e,n){return arguments.length?i(e,n):i(r())},n.scopes=function(e){return p(e)},t()}}var m=r(1),y={};f.ensure=c,f.pack=l,f.scope=i,f.scopes=p,f.parentelement=a,f.parentscope=s,f.middleware=d,e.exports=f,m.module("xRouterAngular",[]).service("xRouterAngular",function(){return{ensure:c,pack:l,scope:i,scopes:p,parentelement:a,parentscope:s}})},function(n,r){n.exports=e}])});